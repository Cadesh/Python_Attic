
#------------------------------------------------------------------------------------------------
# Author: Andre Rosa
# Date: 28 NOV 2018
# Objective: SIMPLE PROGRAM TO USE MULTIPROCESSING
#------------------------------------------------------------------------------------------------

#----------------------------------------------------------------------
# THE PROGRAM RECEIVES ONE PARAMETER
# - the number of threads as: python multiprocess.py 5
#----------------------------------------------------------------------

from multiprocessing import Process, Queue
import os

#--------------------------------------------------------------------------------------------------------
# 3. WORKER: the method that will run as a thread
#--------------------------------------------------------------------------------------------------------
def worker(i):
    print ('Worker done ', i)
    return
#--------------------------------------------------------------------------------------------------------

#-------------------------------------------------------------------------------------------------------- 
# 2. RUN: start processess, param T is the number of threads to create   
#--------------------------------------------------------------------------------------------------------
def run(T):
    jobs = []
    for i in range(T):
        p = Process(target=worker, args = (i,))
        jobs.append(p)
        p.start()
#--------------------------------------------------------------------------------------------------------

#--------------------------------------------------------------------------------------------------------
# 1. MAIN FUNCTION
#--------------------------------------------------------------------------------------------------------
if __name__ == "__main__":

    #imput parameters
    import sys
    T = int(sys.argv[1])        # number of threads to create
    run(T)
#--------------------------------------------------------------------------------------------------------
